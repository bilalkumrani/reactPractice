/* jshint esnext:true */

global.log = require('npmlog');
log.heading = 'node-latest-version';

var assert = require('assert');
var t = require('thunkify');

describe('node-latest-version', function () {
  var Resolver = require('../');

  describe('#satisfy', function () {

    it('shall yield', function *() {
      var r = yield new t(Resolver)();
      
      assert.equal(r.satisfy('>=0.8.0 <0.9'), '0.8.28');
      assert.equal(r.satisfy('=0.11.13'), '0.11.13');
    });

    it('should do its thing', function (done) {
      var r = new Resolver(function () {
        assert.equal(r.satisfy('>=0.8.0 <0.9'), '0.8.28');
        assert.equal(r.satisfy('=0.11.13'), '0.11.13');
        done();
      });
    });
  });

  describe('#satisfy.sync', function () {
    var r = Resolver;

    it('should return satisfying version', function () {
      assert.equal(r.satisfy.sync('0.8.x'), '0.8.28');
    });

    it('should return satisfying version', function () {
      assert.equal(r.satisfy.sync('>=0.8.0 <0.9'), '0.8.28');
      assert.equal(r.satisfy.sync('=0.11.13'), '0.11.13');
    });

  });
});
